<!doctype html>
<html lang="de">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" href="./favicon.ico" type="image/x-icon" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>CODE CRISPIES - CSS interaktiv lernen</title>
		<link rel="stylesheet" href="main.css" />
	</head>
	<body>
		<a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>
		<div class="app-container">
			<!-- Minimaler Header -->
			<header class="header">
				<button id="menu-btn" class="menu-toggle" aria-label="Menü öffnen">
					<span class="hamburger-line"></span>
					<span class="hamburger-line"></span>
					<span class="hamburger-line"></span>
				</button>
				<div class="logo">
					<img src="./bowl.png" width="40" alt="CODE CRISPIES Logo" />
					<h1>CODE<span>CRISPIES</span></h1>
				</div>
				<div class="header-actions">
					<a href="./index.html" class="lang-switch" aria-label="Switch language: English">EN</a>
					<button id="help-btn" class="help-toggle" aria-label="Hilfe">?</button>
				</div>
			</header>

			<!-- Hauptlayout -->
			<main class="game-layout" id="main-content">
				<!-- Linke Spalte: Anleitung + Editor -->
				<div class="left-panel">
					<section class="instructions">
						<span class="module-pill" id="module-pill">Laden...</span>
						<h2 id="lesson-title">Laden...</h2>
						<div class="lesson-description" id="lesson-description">
							Bitte wähle eine Lektion aus, um zu beginnen.
						</div>
						<div class="task-instruction" id="task-instruction">
							<!-- Aufgabenanweisungen werden hier angezeigt -->
						</div>
					</section>

					<section class="editor-section">
						<div class="code-editor">
							<div class="editor-header">
								<label for="code-input" class="editor-label">CSS-Editor</label>
								<div class="editor-actions">
									<div class="editor-tools">
										<button id="undo-btn" class="btn btn-icon" title="Rückgängig (Strg+Z)">↶</button>
										<button id="redo-btn" class="btn btn-icon" title="Wiederholen (Strg+Umschalt+Z)">↷</button>
										<button id="reset-code-btn" class="btn btn-icon" title="Auf Anfangscode zurücksetzen">⟲</button>
									</div>
									<button id="run-btn" class="btn btn-run">
										<img src="./gear.svg" alt="" />Ausführen
									</button>
								</div>
							</div>
							<div class="editor-content">
								<!-- Textarea wird durch CodeMirror ersetzt -->
								<textarea id="code-input" class="code-input" spellcheck="false" autocomplete="off" style="display: none;"></textarea>
							</div>
						</div>
						<div class="hint-area" id="hint-area">
							<!-- Hinweise werden hier angezeigt -->
						</div>
					</section>
				</div>

				<!-- Rechte Spalte: Vorschau + Navigation -->
				<div class="right-panel">
					<div class="preview-section">
						<div class="preview-header">
							<span class="preview-label">Deine Ausgabe</span>
							<button id="show-expected-btn" class="btn btn-small">Lösung zeigen</button>
						</div>
						<div class="preview-wrapper">
							<div class="preview-frame" id="preview-area">
								<!-- Vorschau-Iframe wird hier angezeigt -->
							</div>
							<div class="expected-overlay" id="expected-overlay">
								<div class="expected-frame" id="preview-expected">
									<!-- Erwartetes Ergebnis (umschaltbar) -->
								</div>
							</div>
						</div>
					</div>
					<div class="game-controls">
						<button id="prev-btn" class="btn">Zurück</button>
						<div class="level-indicator" id="level-indicator">Lektion 0/0</div>
						<button id="next-btn" class="btn btn-primary">Weiter</button>
					</div>
				</div>
			</main>

			<!-- Seitenleisten-Hintergrund -->
			<div class="sidebar-backdrop" id="sidebar-backdrop"></div>

			<!-- Ausklappbare Seitenleiste -->
			<aside class="sidebar-drawer" id="sidebar-drawer" aria-label="Navigationsmenü">
				<div class="sidebar-header">
					<h3>Menü</h3>
					<button id="close-sidebar" class="close-btn" aria-label="Menü schließen">&times;</button>
				</div>

				<div class="sidebar-section">
					<h4>Fortschritt</h4>
					<div class="progress-display" id="progress-display">
						<div class="progress-bar">
							<div class="progress-fill" id="progress-fill"></div>
						</div>
						<span class="progress-text" id="progress-text">0% abgeschlossen</span>
					</div>
				</div>

				<nav class="sidebar-section" aria-label="Lektionsnavigation">
					<h4 id="lessons-heading">Lektionen</h4>
					<div class="module-list" id="module-list" role="tree" aria-labelledby="lessons-heading">
						<!-- Modulliste wird hier eingefügt -->
					</div>
				</nav>

				<div class="sidebar-section">
					<h4>Einstellungen</h4>
					<label class="toggle-switch">
						<input type="checkbox" id="disable-feedback-toggle" checked />
						<span class="toggle-slider"></span>
						<span class="toggle-label">Hinweise anzeigen</span>
					</label>
					<button id="reset-btn" class="btn btn-text">Fortschritt zurücksetzen</button>
				</div>

				<footer class="app-footer">
					Open Source:
					<a href="https://github.com/nextlevelshit/code-crispies" target="_blank">GitHub</a>
					von <a href="https://dailysh.it" title="Michael W. Czechowski">mwc</a>
				</footer>
			</aside>

			<!-- Hilfe-Dialog -->
			<dialog id="help-dialog" class="dialog">
				<div class="dialog-header">
					<h3>Hilfe</h3>
					<button id="help-dialog-close" class="dialog-close" aria-label="Schließen">&times;</button>
				</div>
				<div class="dialog-content">
					<h4>Über Code Crispies</h4>
					<p>Code Crispies ist eine kostenlose Open-Source-Plattform zum Erlernen von Webentwicklung durch praktische Übungen. Kein Konto erforderlich - einfach loslegen!</p>

					<h4>Lernmodi</h4>
					<ul>
						<li><strong>CSS</strong> - Schreibe CSS-Regeln zum Stylen von Elementen</li>
						<li><strong>Tailwind</strong> - Wende Utility-Klassen direkt im HTML an</li>
						<li><strong>HTML</strong> - Übe semantisches Markup und native Elemente</li>
					</ul>

					<h4>Erste Schritte</h4>
					<p>Öffne das Menü (☰), um Lektionsmodule zu durchsuchen. Jedes Modul behandelt ein Thema mit aufeinander aufbauenden Übungen.</p>

					<h4>Lektionen abschließen</h4>
					<ol>
						<li>Lies die Aufgabenstellung auf der linken Seite</li>
						<li>Schreibe deinen Code im Editor</li>
						<li>Klicke auf <strong>Ausführen</strong> oder drücke <kbd>Strg+Enter</kbd></li>
						<li>Folge den Hinweisen, um Fehler zu beheben</li>
						<li>Klicke auf <strong>Weiter</strong>, wenn du fertig bist</li>
					</ol>

					<h4>Editor-Werkzeuge</h4>
					<ul>
						<li><strong>↶ Rückgängig</strong> / <strong>↷ Wiederholen</strong> - Bearbeitungsverlauf navigieren</li>
						<li><strong>⟲ Zurücksetzen</strong> - Ursprünglichen Code wiederherstellen</li>
						<li><strong>Lösung zeigen</strong> - Zielergebnis ein-/ausblenden</li>
					</ul>

					<h4>Tastenkürzel</h4>
					<ul>
						<li><kbd>Strg+Enter</kbd> - Code ausführen</li>
						<li><kbd>Strg+Z</kbd> - Rückgängig</li>
						<li><kbd>Strg+Umschalt+Z</kbd> - Wiederholen</li>
					</ul>

					<h4>Emmet-Kürzel (HTML-Modus)</h4>
					<p>Tippe Abkürzungen und drücke <kbd>Tab</kbd> zum Erweitern:</p>
					<ul>
						<li><kbd>div.box</kbd> → div mit Klasse</li>
						<li><kbd>ul>li*3</kbd> → ul mit 3 li-Kindern</li>
						<li><kbd>form>input+button</kbd> → verschachtelte Struktur</li>
						<li><kbd>p{Hallo}</kbd> → p mit Textinhalt</li>
					</ul>
				</div>
			</dialog>

			<!-- Zurücksetzen-Bestätigungsdialog -->
			<dialog id="reset-dialog" class="dialog">
				<div class="dialog-header">
					<h3>Fortschritt zurücksetzen</h3>
					<button id="reset-dialog-close" class="dialog-close" aria-label="Schließen">&times;</button>
				</div>
				<div class="dialog-content">
					<p>Bist du sicher, dass du deinen gesamten Fortschritt zurücksetzen möchtest? Dies kann nicht rückgängig gemacht werden.</p>
					<div class="dialog-actions">
						<button id="cancel-reset" class="btn">Abbrechen</button>
						<button id="confirm-reset" class="btn btn-ghost">Alles zurücksetzen</button>
					</div>
				</div>
			</dialog>
		</div>

		<script type="module" src="app.de.js"></script>
	</body>
</html>
