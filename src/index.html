<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" href="./favicon.ico" type="image/x-icon" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>CODE CRISPIES - Learn CSS Interactively</title>
		<link rel="stylesheet" href="main.css" />
	</head>
	<body>
		<div class="app-container">
			<!-- Minimal Header -->
			<header class="header">
				<button id="menu-btn" class="menu-toggle" aria-label="Open menu">
					<span class="hamburger-line"></span>
					<span class="hamburger-line"></span>
					<span class="hamburger-line"></span>
				</button>
				<div class="logo">
					<img src="./bowl.png" width="40" alt="CODE CRISPIES Logo" />
					<h1>CODE<span>CRISPIES</span></h1>
				</div>
				<button id="help-btn" class="help-toggle" aria-label="Help">?</button>
			</header>

			<!-- Main Game Layout -->
			<main class="game-layout">
				<!-- Left Panel: Instructions + Editor -->
				<div class="left-panel">
					<section class="instructions">
						<h2 id="lesson-title">Loading...</h2>
						<div class="lesson-description" id="lesson-description">
							Please select a lesson to begin.
						</div>
						<div class="task-instruction" id="task-instruction">
							<!-- Task instructions will be shown here -->
						</div>
					</section>

					<section class="editor-section">
						<div class="code-editor">
							<div class="editor-header">
								<label for="code-input" class="editor-label">CSS Editor</label>
								<div class="editor-actions">
									<div class="editor-tools">
										<button id="undo-btn" class="btn btn-icon" title="Undo (Ctrl+Z)">↶</button>
										<button id="redo-btn" class="btn btn-icon" title="Redo (Ctrl+Shift+Z)">↷</button>
										<button id="reset-code-btn" class="btn btn-icon" title="Reset to initial code">⟲</button>
									</div>
									<button id="run-btn" class="btn btn-run">
										<img src="./gear.svg" alt="" />Run
									</button>
								</div>
							</div>
							<div class="editor-content">
								<!-- Textarea is replaced by CodeMirror; autocomplete off prevents browser form restoration -->
								<textarea id="code-input" class="code-input" spellcheck="false" autocomplete="off" style="display: none;"></textarea>
							</div>
						</div>
						<div class="hint-area" id="hint-area">
							<!-- Hints displayed inline here -->
						</div>
					</section>
				</div>

				<!-- Right Panel: Preview + Navigation -->
				<div class="right-panel">
					<div class="preview-section">
						<div class="preview-header">
							<span class="preview-label">Your Output</span>
							<button id="show-expected-btn" class="btn btn-small">Show Expected</button>
						</div>
						<div class="preview-wrapper">
							<div class="preview-frame" id="preview-area">
								<!-- User's preview iframe will be shown here -->
							</div>
							<div class="expected-overlay" id="expected-overlay">
								<div class="expected-frame" id="preview-expected">
									<!-- Expected result iframe (toggleable) -->
								</div>
							</div>
						</div>
					</div>
					<div class="game-controls">
						<button id="prev-btn" class="btn">Previous</button>
						<div class="level-indicator" id="level-indicator">Level 0/0</div>
						<button id="next-btn" class="btn btn-primary">Next</button>
					</div>
				</div>
			</main>

			<!-- Sidebar Backdrop -->
			<div class="sidebar-backdrop" id="sidebar-backdrop"></div>

			<!-- Slide-out Sidebar -->
			<aside class="sidebar-drawer" id="sidebar-drawer">
				<div class="sidebar-header">
					<h3>Menu</h3>
					<button id="close-sidebar" class="close-btn" aria-label="Close menu">&times;</button>
				</div>

				<div class="sidebar-section">
					<h4>Progress</h4>
					<div class="progress-display" id="progress-display">
						<div class="progress-bar">
							<div class="progress-fill" id="progress-fill"></div>
						</div>
						<span class="progress-text" id="progress-text">0% Complete</span>
					</div>
				</div>

				<div class="sidebar-section">
					<h4>Lessons</h4>
					<div class="module-list" id="module-list">
						<!-- Module list will be populated here -->
					</div>
				</div>

				<div class="sidebar-section">
					<h4>Settings</h4>
					<label class="toggle-switch">
						<input type="checkbox" id="disable-feedback-toggle" checked />
						<span class="toggle-slider"></span>
						<span class="toggle-label">Show Hints</span>
					</label>
					<button id="reset-btn" class="btn btn-text">Reset All Progress</button>
				</div>

				<footer class="app-footer">
					Open Source:
					<a href="https://github.com/nextlevelshit/code-crispies" target="_blank">GitHub</a>
					by <a href="https://dailysh.it" title="Michael W. Czechowski">mwc</a>
				</footer>
			</aside>

			<!-- Help Modal -->
			<div id="modal-container" class="modal-container hidden">
				<div class="modal">
					<div class="modal-header">
						<h3 id="modal-title">Modal Title</h3>
						<button id="modal-close" class="modal-close">&times;</button>
					</div>
					<div class="modal-content" id="modal-content">
						<!-- Modal content will be populated here -->
					</div>
				</div>
			</div>
		</div>

		<script type="module" src="app.js"></script>
	</body>
</html>
